
# 🤝 Payzme 레퍼럴 로직 설계

## 🎯 목적

Payzme는 사용자 초대를 통해 마이닝 보상을 공유할 수 있는 **레퍼럴 시스템**을 운영합니다. 추천자는 하위 사용자의 마이닝 리워드 중 일부를 리워드로 획득하며, 마스터 추천코드와 일반 추천코드에 따라 보상 구조가 달라집니다.

---

## 🧱 레퍼럴 구성요소

| 항목                 | 설명                                              |
|----------------------|---------------------------------------------------|
| 마스터 추천코드       | Payzme 내부 운영자 또는 제휴사에 제공되는 코드     |
| 일반 추천코드         | 모든 사용자가 생성 가능한 추천 코드               |
| 하위 사용자           | 추천코드를 통해 가입한 사용자                     |
| 리워드 비율          | 하위 사용자의 보상 중 일정 비율이 추천자에게 배분 |

---

## 💰 리워드 분배 구조

### 1. 마스터 추천코드 사용 시

| 대상             | 리워드 비율 |
|------------------|--------------|
| 마스터 코드 소유자 | 5%          |
| 본인 (등록자)     | 5%          |

📌 총 리워드로 10%가 분배되며, 등록자 본인도 5%를 추가로 보상받습니다.

---

### 2. 일반 추천코드 사용 시

| 대상             | 리워드 비율 |
|------------------|--------------|
| 마스터 코드 소유자 | 5%          |
| 일반 추천자       | 5%          |
| 본인 (등록자)     | 5%          |

📌 총 리워드로 15%가 분배되며, 등록자 본인도 5%를 추가로 보상받습니다.

---

## 📊 예시

- 하위 사용자가 마이닝을 통해 100 point를 적립한 경우:

### 마스터 코드 사용 시

| 대상             | 리워드 (point) |
|------------------|----------------|
| 마스터 추천자     | 5              |
| 본인 (등록자)     | 5              |
| 시스템 잔여       | 90             |

### 일반 코드 사용 시

| 대상             | 리워드 (point) |
|------------------|----------------|
| 마스터 추천자     | 5              |
| 일반 추천자       | 5              |
| 본인 (등록자)     | 5              |
| 시스템 잔여       | 85             |

---

## 🗂 테이블 관련 구조

- `referrals`: referrer_id, referred_id, type(master/normal)
- `user_rewards`: 사용자별 누적 보상
- `mining_sessions`: 마이닝 리워드가 적립될 때마다 referral 처리도 수행

---

## 📌 참고사항

- 레퍼럴 구조는 변경 가능성에 대비하여 테이블에 `type` 필드로 구분
- 마스터 추천코드는 별도 관리 또는 화이트리스트 기반 배정 가능
- 추천 리워드 포인트는 관리자에서 변경가능
